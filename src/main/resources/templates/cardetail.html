<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0">
	<link th:href="@{/css/style.css}" rel="stylesheet">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/css/bootstrap.min.css" rel="stylesheet" >
	<script src="https://kit.fontawesome.com/1494831541.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" ></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.min.js" integrity="sha384-Atwg2Pkwv9vp0ygtn1JAojH0nYbwNJLPhwyoVbhoPwBhjQPR5VtM2+xf0Uwh9KtT" crossorigin="anonymous"></script>
<title>Car Details</title>
</head>
<body>
<div th:replace="fragment/general.html :: nav"></div>
<main>

<section class="py-2 text-center container">
<div class="row py-lg-4">
	<div class="col-lg-6 col-md-8 mx-auto">
		<h3 th:text="${carD.model}"></h3>     
		<div><table class="table table-hover">
		 	<tr>
		 		<td colspan=2> <img class="img-thumbnail img-fluid" width="190" th:src="@{${carD.imgLink}}"/></td> 
		 	</tr>
			<tr>
				<th>Brand</th>
				<td> <span th:text="${carD.brand}"></td> 
			</tr>
			<tr>
				<th>Price</th>
				<td th:with="num=${carD.price}"><span th:text="'$'+${#numbers.formatDecimal(num,3,'COMMA',0,'POINT')}">Price</span></td>
			</tr>
			<tr>
				<th>COE</th>
				<td th:with="num=${carD.coe}"><span th:text="'$'+${#numbers.formatDecimal(num,3,'COMMA',0,'POINT')}">COE</span></td>
			</tr>
			<tr>
				<th>Mileage</th>
				<td th:with="num=${carD.mileageKm}"><span th:text="${#numbers.formatDecimal(num,3,'COMMA',0,'POINT')}+' km'">Mileage</span></td> 
			</tr>
			<tr>
				<th>Engine Capacity</th>
				<td> <span th:text="${carD.engineCapacity}+' cc'"></td> 
			</tr>
			<tr>
				<th>Manufactured Year</th>
				<td> <span th:text="${carD.manufacturedYear}"></td> 
			</tr>
			<tr>
				<th>Number of Owner(s)</th>
				<td> <span th:text="${carD.numOfOwner}"></td> 
			</tr>
			
		</table></div>
	</div>
	<div class="col-lg-6 col-md-8 mx-auto">
		<h3><i class="fa-solid fa-money-check-dollar"></i> Price Analysis</h3>
		<div><table class="table table-hover">
			<tr>
				<td colspan="2" height="160">Our price analysis makes use of the latest Machine Learning model to give you the most accurate car prediction prices. We compare various car features (e.g. num of previous owners, COE, car brand and mileage) using data from over 10,000 sg cars. Maximise the value you get from your next dream car with Kuruma!</td>
			</tr>
			<tr>
				<th>Predicted Price</th>
				<td th:with="num=${carD.predictedPrice}"><span th:text="'$'+${#numbers.formatDecimal(num,3,'COMMA',0,'POINT')}"></span></td>
			</tr>
			<tr>
				<th>Value</th>
				<td th:with="result=${(carD.price-carD.predictedPrice)/carD.predictedPrice * 100}"><span th:style="|${result > 0 ? 'color: red;' : 'color: green;'}|" th:text="${#numbers.formatDecimal(result,0,1)} +'% '"></span><i th:if="${result < 0}" class="fa-regular fa-thumbs-up"></i><i th:if="${result > 0}" class="fa-regular fa-thumbs-down"></i></td>
			</tr>
			<tr>
				<th>Our Recommendation</th>
				<td th:with="result=${(carD.price-carD.predictedPrice)/carD.predictedPrice * 100}">
					<span th:style="|${result > 0 ? 'color: red;' : 'color: green;'}|" th:text="${#numbers.formatDecimal(result,0,1)} +'% '"></span>
					<span th:text="|${result > 0 ? 'ABOVE the predicted price. Wait and observe any price changes.' : 'BELOW the predicted price. Good time to consider purchase.'}|"></span>
					</td>
			</tr>
			<tr>
				<td></td>
				<td><a th:href="@{${carD.link}}" target="_blank" rel="noopener noreferrer"><i class="fa-solid fa-link"></i> Link to car listing </a></td>
			</tr>
		</table></div>
	</div>
	</div>
</section>

<div align="right"><a th:href="@{/search}"><button type="button" class="btn btn-secondary py-1">Return <i class="fa-solid fa-arrow-rotate-left"></i></button></a></div>
<section class="py-2 text-center container">
<div class="row py-lg-5">
	<div class="col-lg-6 col-md-8 mx-auto">
		<h3><i class="fa-solid fa-chart-line"></i> Basic Analysis</h3>
		<table class="table table-hover">
			<tr><td colspan="2">Refer to our Basic Analysis of <span th:text="${carD.model}"></span> below. Click
				<a th:href="@{/basicmodel}" target="_blank" rel="noopener noreferrer">here <i class="fa-solid fa-arrow-up-right-from-square"></i></a> to find out more.</td>
			</tr>
			<tr><th>Our Verdict <i class="fa-solid fa-circle-check"></i></th>
				<td th:switch="${carmodel}">
				<span th:case="'Toyota Yaris'" th:text="#{cardetail.efficiency.yaris}"/><span th:case="'Toyota Alphard'" th:text="#{cardetail.efficiency.alphard}"/><span th:case="'Audi RS'" th:text="#{cardetail.efficiency.rs}"/>
				<span th:case="'Honda Fit'" th:text="#{cardetail.efficiency.fit}"/></td>
			</tr>
			<tr></tr>
		</table>
	</div>
		

	<div class="col-lg-6 col-md-8 mx-auto">
		<h3><i class="fa-solid fa-magnifying-glass-chart"></i> Machine Learning (ML) Analysis</h3>
		<table class="table table-hover">
			<tr><td colspan="2">Refer to our ML Analysis of <span th:text="${carD.model}"></span> using the latest Machine Learning model. Click
				<a th:href="@{/expertmodel}" target="_blank" rel="noopener noreferrer">here <i class="fa-solid fa-arrow-up-right-from-square"></i></a> to find out more.</td>
			</tr>
			<tr><th>Our Verdict <i class="fa-solid fa-circle-check"></i></th>
				<td th:switch="${carmodel}"><span th:case="'Toyota Yaris'" th:text="#{cardetail.expert.yaris}"/><span th:case="'Toyota Alphard'" th:text="#{cardetail.expert.alphard}"/><span th:case="'Audi RS'" th:text="#{cardetail.expert.rs}"/>
				<span th:case="'Honda Fit'" th:text="#{cardetail.expert.fit}"/></td>
			</tr>
			<tr><td></td>
				<td th:switch="${carmodel}"><span th:case="'Toyota Yaris'" th:text="#{cardetail.basic.yaris}"/><span th:case="'Toyota Alphard'" th:text="#{cardetail.basic.alphard}"/><span th:case="'Audi RS'" th:text="#{cardetail.basic.rs}"/>
				<span th:case="'Honda Fit'" th:text="#{cardetail.basic.fit}"/></td></tr>
		</table>
	</div></div>
</section>
</main>

<div th:replace="fragment/footer.html :: footer"></div>
</body>
</html>>

